---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```


# vaccinationimpact

<!-- badges: start -->
[![R-CMD-check](https://github.com/Epiconcept-Paris/vaccinationimpact/actions/workflows/formatting_and_check.yml/badge.svg)](https://github.com/Epiconcept-Paris/vaccinationimpact/actions/)
<!-- badges: end -->

The goal of `{vaccinationimpact}` is to assess the impact of vaccination campaigns using the following estimates:

- Number of events averted by vaccination (NAE)
- Number of avertable events considering an increase in final coverage (NAbE)
- Number needed to vaccinate (NNV) to prevent one event

## Installation

You can install the package from CRAN with: 

``` r
install.packages("vaccinationimpact")
```

You can install the development version of vaccinationimpact from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("Epiconcept-Paris/vaccinationimpact")
```

## Example

We use some toy data to illustrate the usage of the package: weekly coverage, incidence and vaccine effectiveness are provided in the package.

```{r example}
library(vaccinationimpact)
data(coverage_and_incidence_mock_data)
data(ve_mock_data)
coverage <- coverage_and_incidence_mock_data$coverage_data
incidence <- coverage_and_incidence_mock_data$incidence_data
vaccine_effectiveness <- ve_mock_data$ve
```

### NAE

```{r}
nae <- compute_events_averted_by_vaccination(
  number_of_events = incidence$events,
  cumulative_coverage = coverage$cumulative_coverage,
  vaccine_effectiveness = vaccine_effectiveness
)
nae
```

### NAbE

```{r}
nabe <- compute_events_avertable_by_increasing_coverage(
  number_of_events = incidence$events,
  cumulative_coverage = coverage$cumulative_coverage,
  vaccine_coverage_increase = 0.1, # 10% increase in final coverage
  vaccine_effectiveness = vaccine_effectiveness
)
nabe$nabe
```

### NNV

NNV can be estimated using 2 methods: Machado et al. and Tuite and Fisman (see vignette for more details).

#### Machado et al. method

```{r}
sample_size <- 1234

nnv_machado <- compute_number_needed_to_vaccinate_machado(
  number_of_events = incidence$events,
  number_of_events_averted = nae,
  population_size = sample_size,
  vaccine_effectiveness = vaccine_effectiveness
)
nnv_machado
```

#### Tuite and Fisman method

```{r}
nnv_tuite_fisman <- compute_number_needed_to_vaccinate_tuite_fisman(
  number_of_vaccinated = cumsum(coverage$number_of_vaccinated),
  number_of_events_averted = nae
)
nnv_tuite_fisman
```

More information can be found in the [vignette](https://epiconcept-paris.github.io/vaccinationimpact/articles/vaccination_impact_estimates.html).


## Note

This package was developed to conduct an impact study on COVID-19 vaccination as part of the VEBIS project funded by the ECDC.