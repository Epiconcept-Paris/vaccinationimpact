---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```


# vaccineimpact

<!-- badges: start -->
[![R-CMD-check](https://github.com/Epiconcept-Paris/vaccineimpact/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/Epiconcept-Paris/vaccineimpact/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

The goal of `{vaccineimpact}` is to assess the impact of vaccines using the following estimates:

- Number of events averted by vaccination (NAE)
- Number of avertable events considering an increase in final coverage (NAbE)
- Number needed to vaccinate (NNV) to prevent one event

## Installation

You can install the development version of vaccineimpact from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("Epiconcept-Paris/vaccineimpact")
```

## Example

Some toy data is included in the package to illustrate the usage of the package.

```{r example}
library(vaccineimpact)
data(coverage_and_incidence_mock_data)
data(ve_mock_data)
coverage <- coverage_and_incidence_mock_data$coverage_data
incidence <- coverage_and_incidence_mock_data$incidence_data
vaccine_effectiveness <- ve_mock_data$ve
```

### NAE

```{r}
nae <- compute_events_averted_by_vaccination(
  events = incidence$events,
  cumulative_coverage = coverage$cumulative_coverage,
  vaccine_effectiveness = vaccine_effectiveness
)
nae
```

### NAbE

```{r}
nabe <- compute_events_avertable_by_increasing_coverage(
  events = incidence$events,
  diff_cumulative_coverage = c(0, diff(coverage$cumulative_coverage)),
  target_coverage = max(coverage$cumulative_coverage),
  alpha = 0.1, # 10% increase in final coverage
  vaccine_effectiveness = vaccine_effectiveness
)
nabe
```

### NNV

```{r}
initial_pop_at_risk <- 1000
pop_at_risk <- initial_pop_at_risk - cumsum(incidence$events)

nnv <- compute_number_needed_to_vaccinate(
  events = incidence$events,
  events_averted = nae,
  pop_at_risk = pop_at_risk,
  vaccine_effectiveness = vaccine_effectiveness
)
nnv
```

More information can be found in the vignette.
